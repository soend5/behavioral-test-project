# å‡çº§è®¡åˆ’ v3.0ï¼ˆç»ˆç‰ˆï¼‰

> åŸºäºã€Šå‡çº§è®¡åˆ’ v2.0 â€“ æ–°ç‰ˆåŠ©æ•™ & Admin ç«¯è¿­ä»£è®¡åˆ’ã€‹é‡æ–°åˆ¶å®š
> æ—¥æœŸï¼š2026-01-09
> æ ¸å¿ƒåŸåˆ™ï¼šç”¨æˆ·ç«¯ç§»åŠ¨ä¼˜å…ˆï¼ŒåŠ©æ•™/Adminç«¯Webä¼˜å…ˆ+ç§»åŠ¨ç«¯å±•ç¤ºé‡ç‚¹

---

## ä¸€ã€ç‰ˆæœ¬è§„åˆ’æ€»è§ˆ

| ç‰ˆæœ¬ | å‘¨æœŸ | ä¸»é¢˜ | æ ¸å¿ƒç›®æ ‡ | ä¼˜å…ˆçº§ |
|------|------|------|----------|--------|
| v1.9 | 1å‘¨ | Quick Wins | å¯¼èˆªé‡ç»„+ä¿¡æ¯åˆ†å±‚+è¯æœ¯ä¼˜åŒ– | P0 |
| v2.0 | 2å‘¨ | ç­–ç•¥ä¸­å¿ƒ | SOP+è¯æœ¯åˆå¹¶+æ ‡ç­¾ç®¡ç†+é…ç½®é¢„è§ˆ | P0 |
| v2.1 | 2å‘¨ | åŠ©æ•™æ•ˆèƒ½ | ç­›é€‰å™¨+é«˜é£é™©é¢„è­¦+æ‰¹é‡æ“ä½œ+è·Ÿè¿›æ¨¡æ¿ | P0 |
| v2.2 | 2å‘¨ | ç³»ç»Ÿå¥å£® | é…ç½®ç‰ˆæœ¬+æƒé™æ‰©å±•+å†²çªæ£€æµ‹+ä¾èµ–å¯è§†åŒ– | P1 |

**æ€»å‘¨æœŸï¼š7å‘¨**

---

## äºŒã€ç»ˆç«¯é€‚é…ç­–ç•¥

### ç”¨æˆ·ç«¯ï¼ˆå®¢æˆ·ï¼‰- ç§»åŠ¨ç«¯ä¼˜å…ˆ

| é¡µé¢ | ç§»åŠ¨ç«¯ä¼˜åŒ–é‡ç‚¹ |
|------|----------------|
| è½åœ°é¡µ /t/[token] | é¦–å±å®Œæ•´å±•ç¤ºä»·å€¼ä¸»å¼ +å¼€å§‹æŒ‰é’® |
| æµ‹è¯„é¡µ /t/[token]/quiz | å¤§æŒ‰é’®+è¿›åº¦æ¡+å•é¢˜å•å± |
| ç»“æœé¡µ /t/[token]/result | é¦–å±ï¼šç”»åƒ+æ ¸å¿ƒæ´å¯Ÿ+è”ç³»åŠ©æ•™ |
| è®­ç»ƒé¡µ /t/[token]/training | å¡ç‰‡å¼ä»»åŠ¡åˆ—è¡¨+å¤§æŒ‰é’® |

### åŠ©æ•™ç«¯ - Webä¼˜å…ˆï¼Œç§»åŠ¨ç«¯å±•ç¤ºé‡ç‚¹

| é¡µé¢ | Webç«¯å®Œæ•´åŠŸèƒ½ | ç§»åŠ¨ç«¯ç²¾ç®€å±•ç¤º |
|------|---------------|----------------|
| ä»ªè¡¨ç›˜ /coach/dashboard | å¾…åŠ+å®¢æˆ·åˆ—è¡¨+ç­›é€‰ | å¾…åŠåˆ—è¡¨+å¿«é€Ÿæ“ä½œ |
| å®¢æˆ·è¯¦æƒ… /coach/clients/[id] | å…¨éƒ¨ä¿¡æ¯+è¯æœ¯+è·Ÿè¿› | å…³é”®ä¿¡æ¯å¡ç‰‡+ä¸€é”®è¯æœ¯ |

### Adminç«¯ - Webä¼˜å…ˆï¼Œç§»åŠ¨ç«¯åªè¯»

| é¡µé¢ | Webç«¯å®Œæ•´åŠŸèƒ½ | ç§»åŠ¨ç«¯ |
|------|---------------|--------|
| æ•°æ®çœ‹æ¿ | å®Œæ•´å›¾è¡¨+ç­›é€‰ | æ ¸å¿ƒæŒ‡æ ‡å¡ç‰‡ï¼ˆåªè¯»ï¼‰ |
| ç­–ç•¥ä¸­å¿ƒ | å®Œæ•´é…ç½® | åªè¯»æŸ¥çœ‹ |

---

## ä¸‰ã€v1.9 Quick Winsï¼ˆ1å‘¨ï¼‰

### ç›®æ ‡
- Admin å¯¼èˆªå®Œæ•´åº¦ 100%
- åŠ©æ•™è¯æœ¯ä½¿ç”¨ç‡ +20%
- é…ç½®ç†è§£æˆæœ¬é™ä½

### 3.1 Admin å¯¼èˆªé‡ç»„

**æ”¹åŠ¨æ–‡ä»¶**ï¼š`app/admin/_components/AdminNav.tsx`

**å½“å‰çŠ¶æ€**ï¼šå¯¼èˆªå¹³é“ºï¼Œç¼ºå°‘æ•°æ®çœ‹æ¿ã€è¯æœ¯åº“ã€è®­ç»ƒè®¡åˆ’å…¥å£

**æ”¹åï¼ˆæŒ‰èŒè´£åˆ†ç»„ï¼‰**ï¼š
```tsx
const navGroups = [
  {
    label: "è¿è¥",
    items: [
      { href: "/admin/dashboard", label: "ğŸ“Š æ•°æ®çœ‹æ¿" },
    ]
  },
  {
    label: "ç­–ç•¥",
    items: [
      { href: "/admin/sop", label: "ğŸ¯ SOPé…ç½®" },
      { href: "/admin/scripts", label: "ğŸ’¬ è¯æœ¯åº“" },
      { href: "/admin/training", label: "ğŸ“… è®­ç»ƒè®¡åˆ’" },
    ]
  },
  {
    label: "å†…å®¹",
    items: [
      { href: "/admin/quiz", label: "ğŸ“ é¢˜åº“" },
      { href: "/admin/archetypes", label: "ğŸ‘¤ ç”»åƒæ–‡æ¡ˆ" },
      { href: "/admin/training-handbook", label: "ğŸ“š å†…è®­æ‰‹å†Œ" },
      { href: "/admin/methodology", label: "ğŸ“– æ–¹æ³•è®º" },
    ]
  },
  {
    label: "ç®¡ç†",
    items: [
      { href: "/admin/coaches", label: "ğŸ‘¥ åŠ©æ•™è´¦å·" },
      { href: "/admin/settings", label: "âš™ï¸ ç³»ç»Ÿè®¾ç½®" },
      { href: "/admin/audit", label: "ğŸ“‹ å®¡è®¡æ—¥å¿—" },
    ]
  },
];
```

**å·¥æ—¶**ï¼š0.5å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šå¦

### 3.2 Admin é¦–é¡µæ”¹ä¸ºæ•°æ®çœ‹æ¿

**æ”¹åŠ¨æ–‡ä»¶**ï¼š`app/admin/page.tsx`

```tsx
import { redirect } from "next/navigation";
export default function AdminPage() {
  redirect("/admin/dashboard");
}
```

**å·¥æ—¶**ï¼š0.5å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šå¦

### 3.3 åŠ©æ•™ç«¯å®¢æˆ·è¯¦æƒ…é¡µä¿¡æ¯åˆ†å±‚

**æ”¹åŠ¨æ–‡ä»¶**ï¼š`app/coach/clients/[id]/page.tsx`

**å½“å‰çŠ¶æ€**ï¼šä¿¡æ¯å¹³é“ºï¼Œå…³é”®ä¿¡æ¯ï¼ˆç”»åƒã€é˜¶æ®µã€åˆ†å±‚æ ‡ç­¾ï¼‰ä¸çªå‡º

**æ–°å¸ƒå±€åŸåˆ™**ï¼š
1. å…³é”®ä¿¡æ¯å¡ç‰‡ç½®é¡¶ï¼ˆç”»åƒç±»å‹+é™ªè·‘é˜¶æ®µ+åˆ†å±‚æ ‡ç­¾ï¼‰
2. ä¸€é”®è¯æœ¯ç´§éšå…¶åï¼ˆå¸¦"æ™ºèƒ½æ¨è"æ ‡è¯†ï¼‰
3. é™ªè·‘å»ºè®®ç²¾ç®€ç‰ˆ
4. å¿«é€Ÿè®°å½•å…¥å£
5. æ›´å¤šä¿¡æ¯é»˜è®¤æŠ˜å 

**å·¥æ—¶**ï¼š1.5å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šæ˜¯ï¼ˆé˜¶æ®µï¼šå„é™ªè·‘é˜¶æ®µï¼›æ ‡ç­¾é€»è¾‘ï¼šç”»åƒç±»å‹ã€å®¢æˆ·åˆ†å±‚ç­‰ï¼‰

### 3.4 è¯æœ¯é¢æ¿ä¼˜åŒ–

**æ”¹åŠ¨æ–‡ä»¶**ï¼š`app/coach/clients/[id]/_components/ScriptPanel.tsx`

**ä¼˜åŒ–ç‚¹**ï¼š
1. ç§»åˆ°é¡µé¢é¡¶éƒ¨ä½ç½®
2. å¢åŠ "æ™ºèƒ½æ¨è"æ ‡è®°
3. å¤åˆ¶åè‡ªåŠ¨è®°å½•ä½¿ç”¨æ—¥å¿—
4. ç§»åŠ¨ç«¯ï¼šå¤§æŒ‰é’®+å…¨å®½æ˜¾ç¤º

**å·¥æ—¶**ï¼š1å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šå¦

### 3.5 å¾…åŠé¢æ¿é»˜è®¤å±•å¼€

**æ”¹åŠ¨æ–‡ä»¶**ï¼š`app/coach/_components/TodoPanel.tsx`

```tsx
const [expanded, setExpanded] = useState(true); // æ”¹ä¸ºé»˜è®¤å±•å¼€
```

**å·¥æ—¶**ï¼š0.5å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šå¦

### 3.6 åˆè§„æç¤ºæªè¾ä¼˜åŒ–

**æ”¹åŠ¨æ–‡ä»¶**ï¼š`lib/ui-copy.ts`

```typescript
export const COMPLIANCE_NOTICES = {
  coach_panel: "ä»¥ä¸‹ä¸ºæ²Ÿé€šå‚è€ƒï¼Œè¯·å‹¿ä½œä¸ºæŠ•èµ„å»ºè®®",
  result_page: "è¿™æ˜¯ä½ çš„è¡Œä¸ºç»“æ„ç”»åƒï¼Œç”¨äºå’ŒåŠ©æ•™å¯¹é½ä¸‹ä¸€æ­¥",
  landing_page: "æœ¬æµ‹è¯„å¸®ä½ çœ‹æ¸…æ“ä½œä¹ æƒ¯ï¼Œä¸æ¶‰åŠæŠ•èµ„å»ºè®®",
};
```

**å·¥æ—¶**ï¼š0.5å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šå¦

### 3.7 SOP/è¯æœ¯é¡µé¢æ–‡æ¡ˆä¼˜åŒ–

**æ”¹åŠ¨æ–‡ä»¶**ï¼š`app/admin/sop/page.tsx`ã€`app/admin/scripts/page.tsx`

| æ”¹å‰ | æ”¹å |
|------|------|
| SOP é…ç½®ç®¡ç† | é™ªè·‘ç­–ç•¥é…ç½® |
| åŒ¹é…è§„åˆ™ | è§¦å‘æ¡ä»¶ |
| è¯æœ¯åº“ç®¡ç† | æ²Ÿé€šè¯æœ¯åº“ |
| è§¦å‘æ ‡ç­¾ | é€‚ç”¨åœºæ™¯ |

**å·¥æ—¶**ï¼š0.5å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šå¦

### v1.9 ä»»åŠ¡æ¸…å•

| ä»»åŠ¡ | å·¥æ—¶ | ç»ˆå±€æ¨¡å‹ | éªŒæ”¶æŒ‡æ ‡ |
|------|------|----------|----------|
| Admin å¯¼èˆªé‡ç»„ | 0.5d | å¦ | æ‰€æœ‰é¡µé¢å¯ä»å¯¼èˆªè®¿é—® |
| Admin é¦–é¡µæ”¹ä¸ºæ•°æ®çœ‹æ¿ | 0.5d | å¦ | ç™»å½•åç›´è¾¾çœ‹æ¿ |
| å®¢æˆ·è¯¦æƒ…é¡µä¿¡æ¯åˆ†å±‚ | 1.5d | æ˜¯ | å…³é”®ä¿¡æ¯é¦–å±å¯è§ |
| è¯æœ¯é¢æ¿ä¼˜åŒ– | 1d | å¦ | è¯æœ¯ä½¿ç”¨ç‡+20% |
| å¾…åŠé¢æ¿é»˜è®¤å±•å¼€ | 0.5d | å¦ | å“åº”æ—¶é—´-15% |
| åˆè§„æç¤ºä¼˜åŒ– | 0.5d | å¦ | æ–‡æ¡ˆæ›´æ–°å®Œæˆ |
| SOP/è¯æœ¯æ–‡æ¡ˆä¼˜åŒ– | 0.5d | å¦ | ç†è§£æˆæœ¬é™ä½ |
| **æ€»è®¡** | **5d** | | |

---

## å››ã€v2.0 ç­–ç•¥ä¸­å¿ƒï¼ˆ2å‘¨ï¼‰

### ç›®æ ‡
- é…ç½®å…¥å£ä» 4 ä¸ªå‡å°‘åˆ° 2 ä¸ª
- æ¶ˆé™¤ SOP Rule å’Œè¯æœ¯ triggerTags çš„é‡å¤é…ç½®
- å»ºç«‹æ ‡ç­¾é©±åŠ¨ç­–ç•¥å¼•æ“åŸºç¡€æ¡†æ¶

### 4.1 ç­–ç•¥ä¸­å¿ƒæ¨¡å—ï¼ˆSOP+è¯æœ¯åˆå¹¶ï¼‰

**æ–°å»ºæ–‡ä»¶**ï¼š`app/admin/strategy/page.tsx`

**è®¾è®¡ç†å¿µ**ï¼š
- SOP Definition ä½œä¸º"ç­–ç•¥"
- SOP Rule ä½œä¸º"è§¦å‘æ¡ä»¶"
- è¯æœ¯ä½œä¸º"æ‰§è¡Œå†…å®¹"ï¼Œå…³è”åˆ° SOP

**é¡µé¢ç»“æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç­–ç•¥ä¸­å¿ƒ                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç­–ç•¥åˆ—è¡¨ï¼ˆå·¦ä¾§æ ‘å½¢ï¼‰          â”‚ ç­–ç•¥è¯¦æƒ…ï¼ˆå³ä¾§ï¼‰                  â”‚
â”‚ â–¼ è®¤çŸ¥å»ºç«‹æœŸ (pre)           â”‚ ç­–ç•¥åç§°ï¼šä¿¡ä»»å»ºç«‹ç­–ç•¥            â”‚
â”‚   â”œâ”€â”€ ä¿¡ä»»å»ºç«‹ç­–ç•¥           â”‚ é˜¶æ®µï¼šè®¤çŸ¥å»ºç«‹æœŸ (pre)            â”‚
â”‚   â””â”€â”€ éœ€æ±‚äº†è§£ç­–ç•¥           â”‚ çŠ¶æ€ï¼šå¯ç”¨                        â”‚
â”‚ â–¼ è¡ŒåŠ¨æ¨è¿›æœŸ (mid)           â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚   â”œâ”€â”€ æ–¹æ¡ˆæ²Ÿé€šç­–ç•¥           â”‚ ğŸ“‹ ç­–ç•¥å†…å®¹                       â”‚
â”‚   â””â”€â”€ ç–‘è™‘è§£ç­”ç­–ç•¥           â”‚ ğŸ¯ è§¦å‘æ¡ä»¶ï¼ˆåŸ SOP Ruleï¼‰        â”‚
â”‚ â–¼ æˆæœå·©å›ºæœŸ (post)          â”‚ ğŸ’¬ å…³è”è¯æœ¯                       â”‚
â”‚   â””â”€â”€ è·Ÿè¿›æ”¯æŒç­–ç•¥           â”‚ ğŸ“Š å½±å“é¢„è§ˆï¼ˆçº¦ 156 ä¸ªå®¢æˆ·ï¼‰      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å·¥æ—¶**ï¼š5å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šæ˜¯ï¼ˆé˜¶æ®µï¼šå…¨é™ªè·‘é˜¶æ®µï¼›æ ‡ç­¾é€»è¾‘ï¼šSOP è§¦å‘æ ‡ç­¾é©±åŠ¨ï¼‰

### 4.2 è¯æœ¯å…³è” SOP é‡æ„

**ä¿®æ”¹æ–‡ä»¶**ï¼š`prisma/schema.prisma`ã€`app/api/coach/scripts/route.ts`

**æ•°æ®æ¨¡å‹è°ƒæ•´**ï¼š
```prisma
model ScriptTemplate {
  // ... ç°æœ‰å­—æ®µ
  sopId String? @map("sop_id")  // æ–°å¢ï¼šå…³è” SOP
  sop   SopDefinition? @relation(fields: [sopId], references: [sopId])
  @@index([sopId])
}
```

**åŒ¹é…é€»è¾‘**ï¼šä¼˜å…ˆè¿”å›å…³è” SOP çš„è¯æœ¯ï¼Œå†è¿”å›ç‹¬ç«‹è¯æœ¯

**å·¥æ—¶**ï¼š2.5å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šæ˜¯ï¼ˆæ ‡ç­¾é€»è¾‘ï¼šç»Ÿä¸€ç­–ç•¥è§¦å‘æ¡ä»¶ï¼‰

### 4.3 æ ‡ç­¾ç®¡ç†ä¸­å¿ƒ

**æ–°å»ºæ–‡ä»¶**ï¼š`app/admin/tags/page.tsx`

**åŠŸèƒ½**ï¼š
- ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æ ‡ç­¾å®šä¹‰åŠå«ä¹‰ã€å±‚çº§
- æ ‡ç­¾åˆ†ç±»ï¼šç”»åƒæ ‡ç­¾ã€é˜¶æ®µæ ‡ç­¾ã€åˆ†å±‚æ ‡ç­¾ã€è‡ªå®šä¹‰æ ‡ç­¾
- æ ‡ç­¾ä½¿ç”¨ç»Ÿè®¡
- æ ‡ç­¾ä¾èµ–å…³ç³»å±•ç¤º

**å·¥æ—¶**ï¼š2å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šæ˜¯ï¼ˆæ ‡ç­¾é€»è¾‘ï¼šæ ‡ç­¾ä½“ç³»æ²»ç†ï¼‰

### 4.4 é…ç½®å½±å“é¢„è§ˆåŠŸèƒ½

**æ–°å»ºæ–‡ä»¶**ï¼š`app/api/admin/strategy/preview/route.ts`

**åŠŸèƒ½**ï¼šè¿”å›è¯¥ SOP é…ç½®ä¼šå½±å“å¤šå°‘å®¢æˆ·åŠç”»åƒåˆ†å¸ƒ

**å®ç°æ–¹å¼**ï¼šåç«¯æ ¹æ®ç­–ç•¥è§¦å‘æ¡ä»¶ï¼ˆæ ‡ç­¾ç»„åˆï¼‰ç­›é€‰åŒ¹é…å®¢æˆ·ï¼Œå‰ç«¯å¯è§†åŒ–å±•ç¤ºå½±å“äººæ•°åŠç”»åƒåˆ†å¸ƒ

**å·¥æ—¶**ï¼š1.5å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šé—´æ¥æ”¯æŒï¼ˆæ ‡ç­¾é€»è¾‘ï¼šç­–ç•¥å½±å“ç›‘æ§ï¼‰

### v2.0 ä»»åŠ¡æ¸…å•

| ä»»åŠ¡ | å·¥æ—¶ | ç»ˆå±€æ¨¡å‹ | éªŒæ”¶æŒ‡æ ‡ |
|------|------|----------|----------|
| ç­–ç•¥ä¸­å¿ƒé¡µé¢å¼€å‘ | 5d | æ˜¯ | ç»Ÿä¸€å…¥å£å¯ç”¨ |
| è¯æœ¯å…³è” SOP é‡æ„ | 2.5d | æ˜¯ | å…³è”è¯æœ¯ä¼˜å…ˆå±•ç¤º |
| æ ‡ç­¾ç®¡ç†ä¸­å¿ƒ | 2d | æ˜¯ | æ ‡ç­¾ç»Ÿä¸€ç®¡ç† |
| é…ç½®å½±å“é¢„è§ˆ API | 1.5d | é—´æ¥ | é¢„è§ˆå‡†ç¡®ç‡ >95% |
| åŸ SOP/è¯æœ¯é¡µé¢å…¼å®¹ | 1d | å¦ | æ—§å…¥å£å¯ç”¨ |
| **æ€»è®¡** | **12d** | | |

---

## äº”ã€v2.1 åŠ©æ•™æ•ˆèƒ½ï¼ˆ2å‘¨ï¼‰

### ç›®æ ‡
- åŠ©æ•™ç­›é€‰æ•ˆç‡ +50%
- é«˜é£é™©ç”¨æˆ·å“åº”ç‡ +30%
- ç§»åŠ¨ç«¯åŠ©æ•™ä½“éªŒä¼˜åŒ–

### 5.1 å®¢æˆ·ç­›é€‰å™¨

**æ”¹åŠ¨æ–‡ä»¶**ï¼š`app/coach/dashboard/page.tsx`ã€`app/api/coach/customers/route.ts`

**ç­›é€‰ç»´åº¦**ï¼š
- åˆ†å±‚ï¼šé«˜æ½œåŠ› / éœ€å…³æ³¨ / æ´»è·ƒ / æ²‰é»˜ / æ–°å®¢æˆ·
- ç”»åƒï¼š6ç§ç”»åƒç±»å‹
- é˜¶æ®µï¼špre / mid / post
- æœ€è¿‘æ´»åŠ¨ï¼š7å¤©å†… / 14å¤©å†… / 30å¤©å†… / æ›´æ—©

**UIè®¾è®¡**ï¼š
- ç§»åŠ¨ç«¯ï¼šåº•éƒ¨æŠ½å±‰å¼ç­›é€‰
- Webç«¯ï¼šä¾§è¾¹æ ç­›é€‰

**å·¥æ—¶**ï¼š3å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šæ˜¯ï¼ˆé˜¶æ®µï¼šå…¨é™ªè·‘é˜¶æ®µï¼›æ ‡ç­¾é€»è¾‘ï¼šåˆ†å±‚/ç”»åƒç­›é€‰ï¼‰

### 5.2 é«˜é£é™©ç”¨æˆ·é¢„è­¦

**æ”¹åŠ¨æ–‡ä»¶**ï¼š`app/coach/clients/[id]/page.tsx`ã€`app/coach/dashboard/page.tsx`

**æ”¹åŠ¨ç‚¹**ï¼š
1. å®¢æˆ·åˆ—è¡¨ï¼šé«˜é£é™©ç”¨æˆ·çº¢è‰²è¾¹æ¡† + âš ï¸å›¾æ ‡
2. å®¢æˆ·è¯¦æƒ…ï¼šè¿›å…¥æ—¶å¼¹å‡ºé£é™©æç¤º
3. å¾…åŠé¢æ¿ï¼šé«˜é£é™©ç”¨æˆ·ç½®é¡¶

**å·¥æ—¶**ï¼š2å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šæ˜¯ï¼ˆé˜¶æ®µï¼šè¡ŒåŠ¨æ¨è¿›æœŸï¼›æ ‡ç­¾é€»è¾‘ï¼šé«˜é£é™©æ ‡è®°ï¼‰

### 5.3 æ‰¹é‡æ“ä½œåŠŸèƒ½

**æ–°å»ºæ–‡ä»¶**ï¼š`app/api/coach/customers/batch/route.ts`

**åŠŸèƒ½**ï¼š
- æ‰¹é‡æ ‡è®°å·²å¤„ç†
- æ‰¹é‡åˆ›å»ºé‚€è¯·
- æ‰¹é‡æ·»åŠ æ ‡ç­¾

**é£é™©æ§åˆ¶**ï¼š
- ä¿è¯æ“ä½œåŸå­æ€§å’Œå›æ»š
- åˆç‰ˆé™åˆ¶å°æ‰¹é‡ï¼ˆå‡ åä¸ªå®¢æˆ·ï¼‰

**å·¥æ—¶**ï¼š3å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šå¦

### 5.4 è·Ÿè¿›è®°å½•æ¨¡æ¿

**æ”¹åŠ¨æ–‡ä»¶**ï¼š`app/coach/clients/[id]/_components/FollowUpSection.tsx`

**æ¨¡æ¿ç±»å‹**ï¼š
- é¦–æ¬¡æ²Ÿé€š
- è·Ÿè¿›æ²Ÿé€š
- è®­ç»ƒæé†’
- å¤æµ‹é‚€è¯·

**å·¥æ—¶**ï¼š1å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šæ˜¯ï¼ˆé˜¶æ®µï¼šæˆæœå·©å›ºæœŸï¼‰

### 5.5 ç§»åŠ¨ç«¯åŠ©æ•™ä½“éªŒä¼˜åŒ–

**æ–°å»ºæ–‡ä»¶**ï¼š`app/coach/_components/MobileNav.tsx`

**æ”¹åŠ¨ç‚¹**ï¼š
1. åº•éƒ¨å¯¼èˆªæ ï¼ˆç§»åŠ¨ç«¯ï¼‰
2. å…³é”®æ“ä½œå¤§æŒ‰é’®

**å·¥æ—¶**ï¼š1å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šå¦

### v2.1 ä»»åŠ¡æ¸…å•

| ä»»åŠ¡ | å·¥æ—¶ | ç»ˆå±€æ¨¡å‹ | éªŒæ”¶æŒ‡æ ‡ |
|------|------|----------|----------|
| å®¢æˆ·ç­›é€‰å™¨ | 3d | æ˜¯ | ç­›é€‰æ•ˆç‡+50% |
| é«˜é£é™©ç”¨æˆ·é¢„è­¦ | 2d | æ˜¯ | å“åº”ç‡+30% |
| æ‰¹é‡æ“ä½œ | 3d | å¦ | æ‰¹é‡æ“ä½œå¯ç”¨ |
| è·Ÿè¿›è®°å½•æ¨¡æ¿ | 1d | æ˜¯ | è®°å½•æ•ˆç‡+30% |
| ç§»åŠ¨ç«¯åŠ©æ•™ä½“éªŒ | 1d | å¦ | ç§»åŠ¨ç«¯å¯ç”¨æ€§ |
| **æ€»è®¡** | **10d** | | |

---

## å…­ã€v2.2 ç³»ç»Ÿå¥å£®ï¼ˆ2å‘¨ï¼‰

### ç›®æ ‡
- é…ç½®å›æ»šæˆåŠŸç‡ 100%
- æƒé™ä½“ç³»æ”¯æŒ 5 çº§
- é…ç½®è¯¯æ“ä½œç‡ -90%

### 6.1 é…ç½®ç‰ˆæœ¬ç®¡ç†

**æ–°å»ºè¡¨**ï¼š`prisma/schema.prisma`

```prisma
model ConfigVersion {
  id          String   @id @default(cuid())
  configType  String   @map("config_type")  // "sop" | "script" | "training"
  configId    String   @map("config_id")
  version     Int      @default(1)
  dataJson    String   @map("data_json") @db.Text
  changedBy   String   @map("changed_by")
  changeNote  String?  @map("change_note")
  createdAt   DateTime @default(now()) @map("created_at")
  @@index([configType, configId, version])
  @@map("config_versions")
}
```

**API**ï¼š
- `GET /api/admin/config/versions?type=sop&id=xxx`
- `POST /api/admin/config/rollback`

**å·¥æ—¶**ï¼š3å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šé—´æ¥æ”¯æŒï¼ˆç›‘æ§å±‚ï¼‰

### 6.2 é…ç½®å¯¼å…¥å¯¼å‡º

**æ–°å»ºæ–‡ä»¶**ï¼š`app/api/admin/config/export/route.ts`ã€`app/api/admin/config/import/route.ts`

**æ”¯æŒæ ¼å¼**ï¼šJSON/CSV

**å·¥æ—¶**ï¼š2å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šå¦

### 6.3 æƒé™ä½“ç³»æ‰©å±•

**æ”¹åŠ¨æ–‡ä»¶**ï¼š`lib/authz.ts`

**è§’è‰²å®šä¹‰**ï¼š

| è§’è‰² | æƒé™èŒƒå›´ |
|------|----------|
| super_admin | å…¨éƒ¨ |
| content_admin | å†…å®¹ç®¡ç†ï¼ˆé¢˜åº“/ç”»åƒ/å†…è®­/æ–¹æ³•è®ºï¼‰ |
| strategy_admin | ç­–ç•¥ç®¡ç†ï¼ˆSOP/è¯æœ¯/è®­ç»ƒï¼‰ |
| coach_manager | æŸ¥çœ‹æ‰€æœ‰åŠ©æ•™æ•°æ® + åˆ†é…å®¢æˆ· |
| coach | ä»…è‡ªå·±çš„å®¢æˆ· |

**å·¥æ—¶**ï¼š3å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šæ˜¯ï¼ˆæƒé™è¾¹ç•Œï¼šåˆ†é˜¶æ®µåŠ©æ•™æƒé™ï¼‰

### 6.4 é…ç½®å†²çªæ£€æµ‹

**æ–°å»ºæ–‡ä»¶**ï¼š`lib/config-validator.ts`

**æ£€æµ‹å†…å®¹**ï¼š
1. SOPè§„åˆ™å†²çªï¼ˆè§¦å‘æ¡ä»¶é‡å ï¼‰
2. è¯æœ¯ä¸SOPä¸€è‡´æ€§ï¼ˆé˜¶æ®µåŒ¹é…ï¼‰
3. æ— æ•ˆæ ‡ç­¾æ£€æµ‹

**å·¥æ—¶**ï¼š2å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šæ˜¯ï¼ˆæ ‡ç­¾é€»è¾‘ï¼šè§„åˆ™å†²çªç›‘æ§ï¼‰

### 6.5 é…ç½®ä¾èµ–å…³ç³»å¯è§†åŒ–

**æ–°å»ºæ–‡ä»¶**ï¼š`app/admin/strategy/dependencies/page.tsx`

**åŠŸèƒ½**ï¼šå°† SOP ç­–ç•¥ã€è§¦å‘æ ‡ç­¾ã€è¯æœ¯å†…å®¹ä¹‹é—´çš„å…³è”å…³ç³»å›¾å½¢åŒ–å‘ˆç°

**å·¥æ—¶**ï¼š2å¤©
**ç»ˆå±€æ¨¡å‹æ”¯æŒ**ï¼šæ˜¯ï¼ˆç›‘æ§å±‚ï¼šç­–ç•¥/æ ‡ç­¾è¾¹ç•Œï¼‰

### v2.2 ä»»åŠ¡æ¸…å•

| ä»»åŠ¡ | å·¥æ—¶ | ç»ˆå±€æ¨¡å‹ | éªŒæ”¶æŒ‡æ ‡ |
|------|------|----------|----------|
| é…ç½®ç‰ˆæœ¬ç®¡ç† | 3d | é—´æ¥ | å›æ»šæˆåŠŸç‡ 100% |
| é…ç½®å¯¼å…¥å¯¼å‡º | 2d | å¦ | å¯¼å…¥å¯¼å‡ºå¯ç”¨ |
| æƒé™ä½“ç³»æ‰©å±• | 3d | æ˜¯ | 5çº§æƒé™å¯ç”¨ |
| é…ç½®å†²çªæ£€æµ‹ | 2d | æ˜¯ | æ£€æµ‹å‡†ç¡®ç‡ >90% |
| é…ç½®ä¾èµ–å¯è§†åŒ– | 2d | æ˜¯ | ä¾èµ–å›¾å¯æŸ¥çœ‹ |
| **æ€»è®¡** | **12d** | | |

---

## ä¸ƒã€é‡Œç¨‹ç¢‘ä¸éªŒæ”¶

| ç‰ˆæœ¬ | å®Œæˆæ—¥æœŸ | æ ¸å¿ƒéªŒæ”¶æŒ‡æ ‡ | çŠ¶æ€ |
|------|----------|--------------|------|
| v1.9 | W1 | Adminå¯¼èˆªå®Œæ•´åº¦100%ï¼Œè¯æœ¯ä½¿ç”¨ç‡+20% | âœ… å·²å®Œæˆ |
| v2.0 | W3 | é…ç½®å…¥å£å‡å°‘50%ï¼Œç­–ç•¥ä¸­å¿ƒå¯ç”¨ | âœ… å·²å®Œæˆ |
| v2.1 | W5 | åŠ©æ•™ç­›é€‰æ•ˆç‡+50%ï¼Œé«˜é£é™©å“åº”ç‡+30% | âœ… å·²å®Œæˆ |
| v2.2 | W7 | é…ç½®å›æ»šå¯ç”¨ï¼Œæƒé™ä½“ç³»å®Œæ•´ | âœ… å·²å®Œæˆ |

---

## å…«ã€å¾…è®®åŠŸèƒ½æ± 

ä»¥ä¸‹åŠŸèƒ½æš‚ç¼“ï¼Œå¾…æ ¸å¿ƒæ”¹è¿›å®Œæˆåå†è¡Œè§„åˆ’ï¼š

| åŠŸèƒ½ | æš‚ç¼“ç†ç”± |
|------|----------|
| ä¸ªäººè½¬åŒ–ç‡çœ‹æ¿ | å±äºå¢å¼ºå†³ç­–æ”¯æŒçš„æ‹“å±•æ–¹å‘ |
| è¯æœ¯/ç­–ç•¥å†…å®¹å®¡æ ¸æµç¨‹ | ç›®å‰å›¢é˜Ÿè§„æ¨¡å°ï¼ŒçŸ­æœŸæ— è¿«åˆ‡éœ€æ±‚ |
| è¯æœ¯æ•ˆæœåé¦ˆæœºåˆ¶ | å¼€å‘é‡è¾ƒå¤§ï¼Œå…ˆç§¯ç´¯åŸºç¡€æ•°æ® |

---

## ä¹ã€æ–‡ä»¶å˜æ›´æ¸…å•

### v1.9
```
app/admin/_components/AdminNav.tsx
app/admin/page.tsx
app/coach/clients/[id]/page.tsx
app/coach/clients/[id]/_components/ScriptPanel.tsx
app/coach/_components/TodoPanel.tsx
lib/ui-copy.ts
app/admin/sop/page.tsx
app/admin/scripts/page.tsx
```

### v2.0
```
app/admin/strategy/page.tsx             # æ–°å»º
app/admin/tags/page.tsx                 # æ–°å»º
app/api/admin/strategy/preview/route.ts # æ–°å»º
prisma/schema.prisma
app/api/coach/scripts/route.ts
```

### v2.1
```
app/coach/dashboard/page.tsx
app/api/coach/customers/route.ts
app/api/coach/customers/batch/route.ts  # æ–°å»º
app/coach/clients/[id]/page.tsx
app/coach/_components/MobileNav.tsx     # æ–°å»º
app/coach/clients/[id]/_components/FollowUpSection.tsx
```

### v2.2
```
prisma/schema.prisma
app/api/admin/config/versions/route.ts  # æ–°å»º
app/api/admin/config/rollback/route.ts  # æ–°å»º
app/api/admin/config/export/route.ts    # æ–°å»º
app/api/admin/config/import/route.ts    # æ–°å»º
lib/authz.ts
lib/config-validator.ts                 # æ–°å»º
app/admin/strategy/dependencies/page.tsx # æ–°å»º
```

---

## åã€ä¸‰æ®µé™ªè·‘å¼•æ“é›†æˆè¯´æ˜

æœ¬å‡çº§è®¡åˆ’ä¸ã€Œä¸‰æ®µé™ªè·‘ Ã— æ ‡ç­¾é©±åŠ¨é”€å”®å¼•æ“ã€äº§å“ç»“æ„ä¿æŒä¸€è‡´ï¼š

| é™ªè·‘é˜¶æ®µ | ç³»ç»Ÿé˜¶æ®µ | SOPç­–ç•¥é‡ç‚¹ |
|----------|----------|-------------|
| æˆäº¤å‰Â·è®¤çŸ¥å»ºç«‹ | pre | è§£é‡Šè¡Œä¸ºã€å¤è¿°å®¢æˆ·ã€ç‚¹ç ´å¡ç‚¹ |
| æˆäº¤ä¸­Â·å†³ç­–æ¨è¿› | mid | æŒ‡å‡ºé£é™©ã€æ”¶çª„é€‰æ‹©ã€å¼ºè°ƒé™ªè·‘ä»·å€¼ |
| æˆäº¤åÂ·æ‰§è¡Œç¨³å®š | post | è¡Œä¸ºå¤ç›˜ã€å¼ºåŒ–å˜åŒ–ã€è°ƒæ•´é¢„æœŸ |

**æ ‡ç­¾é©±åŠ¨é€»è¾‘**ï¼š
```
æ ‡ç­¾å˜åŒ– â†’ é˜¶æ®µåˆ‡æ¢ â†’ SOPæƒé™å˜åŒ– â†’ æç¤ºåŠ©æ•™å½“å‰å”¯ä¸€ç›®æ ‡
```

ç­–ç•¥ä¸­å¿ƒçš„è®¾è®¡å®Œå…¨æ”¯æŒè¿™ä¸€è¿è¡Œé€»è¾‘ï¼Œé€šè¿‡ç»Ÿä¸€çš„è§¦å‘æ¡ä»¶é…ç½®å®ç°æ ‡ç­¾é©±åŠ¨çš„æ™ºèƒ½é™ªè·‘ã€‚

---

*è®¡åˆ’åˆ¶å®šæ—¥æœŸï¼š2026-01-09*
*è®¡åˆ’ç‰ˆæœ¬ï¼šv3.0*
*æ€»å·¥æœŸï¼š7å‘¨*
